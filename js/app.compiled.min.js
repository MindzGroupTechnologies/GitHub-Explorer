!function(){"use strict";angular.module("utility",[])}(),function(){"use strict";angular.module("utility").provider("page",function(){var a="Home",b="MySite",c=!1,d=function(a){b=a},e=function(b){a=b};this.setSiteTitle=d,this.setPageTitle=e,this.pageTitleOnly=c,this.$get=[function(){var d={};return d.setPageTitle=e,d.getTitle=function(){return c?a:b+" - "+a},d}]})}(),function(){"use strict";angular.module("github",["ui.router","ngStorage"]).config(["$locationProvider","$stateProvider",function(a,b){a.html5Mode({enabled:!0,requireBase:!0,rewriteLinks:!0})}])}(),function(){"use strict";angular.module("github").provider("gitBase",function(){var a={method:"GET"},b="https://api.github.com";this.$get=[function(){var c={};return c.build=function(c,d){c.url=b+c.url;var e={};return $.extend(!0,e,a,c),d&&(e.headers=e.headers||{},e.headers.Authorization="Bearer "+d),e},c}]})}(),function(){"use strict";angular.module("github").provider("gitService",function(){this.$get=["$http","gitBase","$localStorage",function(a,b,c){var d={};return d.searchUser=function(d,e,f,g){e=e||"org",f=f||1,g=g||10;var h=b.build({url:"/search/users",params:{q:d+" type:"+e,page:f,per_page:g}},c.access_token);return a(h)},d.getAuthenticatedUser=function(){var d=b.build({url:"/user",method:"GET"},c.access_token);return a(d)},d.getUser=function(d){var e=b.build({url:"/users/"+d,method:"GET"},c.access_token);return a(e)},d.getUserRepositories=function(d){var e=b.build({url:"/users/"+d+"/repos",method:"GET"},c.access_token);return a(e)},d.getUserRepositoryBranches=function(d,e){var f=b.build({url:"/repos/"+d+"/"+e+"/branches",method:"GET"},c.access_token);return a(f)},d.getUserRepositoryContributors=function(d,e){var f=b.build({url:"/repos/"+d+"/"+e+"/contributors",method:"GET"},c.access_token);return a(f)},d}]})}(),function(){"use strict";angular.module("github").provider("kinveyBase",function(){var a={method:"POST"},b="https://baas.kinvey.com/rpc/kid_rJQkM7uIx";this.$get=[function(){var c={},d="ghe",e="Pass@word#123";return a.headers={},a.headers.Authorization="Basic "+btoa(d+":"+e),c.build=function(c){c.url=b+c.url;var d={};return $.extend(!0,d,a,c),d},c}]})}(),function(){"use strict";angular.module("github").provider("kinveyService",function(){this.$get=["$http","kinveyBase",function(a,b){var c={};return c.getAuthCode=function(c){var d=b.build({url:"/custom/auth_github_explorer",params:{code:c}});return a(d)},c}]})}(),function(){"use strict";angular.module("github").controller("AuthController",["$scope","kinveyService","$location","$window",function(a,b,c,d){console.log("Auth Controller");var e=c.search().code;a.message="Authenticating",e&&b.getAuthCode(e).then(function(a){d.opener.postMessage(a.data,c.protocol()+"://"+c.host()),d.close()})}])}(),function(){"use strict";angular.module("main",["ui.router","ui.bootstrap","ngStorage","github","angulartics.google.analytics","utility"]).config(["$stateProvider","$analyticsProvider","pageProvider",function(a,b,c){b.withAutoBase(!0),c.setSiteTitle("GitHub Explorer"),a.state("search",{url:"/Search",resolve:{pageTitle:["page",function(a){return a.setPageTitle("Search"),a.getTitle()}]},views:{"@":{templateUrl:function(){var a="Views/Search/";return console.log("loading template : "+a),a},controller:"SearchController"}}}).state("user",{url:"/User/:login",resolve:{userInfo:["gitService","$stateParams",function(a,b){return a.getUser(b.login)}],pageTitle:["page",function(a){return a.setPageTitle("User"),a.getTitle()}]},views:{"@":{templateUrl:function(){var a="Views/User/";return console.log("loading template : "+a),a},controller:"UserController"}}}).state("user.repos",{url:"/Repositories",resolve:{repositories:["gitService","$stateParams",function(a,b){return a.getUserRepositories(b.login)}],pageTitle:["page",function(a){return a.setPageTitle("User Repositories"),a.getTitle()}]},views:{"section@user":{templateUrl:function(){var a="Views/User/Repositories/";return console.log("loading template : "+a),a},controller:["$scope","repositories",function(a,b){console.log("Repositories Controller"),a.repositories=b.data}]}}}).state("user.repos.branches",{url:"/:repo/Branches",resolve:{branches:["gitService","$stateParams",function(a,b){return a.getUserRepositoryBranches(b.login,b.repo)}],pageTitle:["page",function(a){return a.setPageTitle("Repository Branches"),a.getTitle()}]},views:{"repo.detail@user.repos":{templateUrl:function(){var a="Views/User/Repositories/Detail/Branches/";return console.log("loading template : "+a),a},controller:["$scope","branches","$stateParams",function(a,b,c){console.log("Branches Controller"),a.branches=b.data,a.repositoryName=c.repo}]}}}).state("user.repos.contributors",{url:"/:repo/Contributors",resolve:{contributors:["gitService","$stateParams",function(a,b){return a.getUserRepositoryContributors(b.login,b.repo)}],pageTitle:["page",function(a){return a.setPageTitle("Repository Contributors"),a.getTitle()}]},views:{"repo.detail@user.repos":{templateUrl:function(){var a="Views/User/Repositories/Detail/Collaborators/";return console.log("loading template : "+a),a},controller:["$scope","contributors","$stateParams",function(a,b,c){console.log("Contributors Controller"),a.contributors=b.data,a.repositoryName=c.repo}]}}}).state("user.orgs",{url:"/Organisations",resolve:{pageTitle:["page",function(a){return a.setPageTitle("User Organisations"),a.getTitle()}]},views:{"section@user":{templateUrl:function(){var a="Views/User/Organisations/";return console.log("loading template : "+a),a}}}}).state("user.gists",{url:"/Gists",resolve:{pageTitle:["page",function(a){return a.setPageTitle("User Gists"),a.getTitle()}]},views:{"section@user":{templateUrl:function(){var a="Views/User/Gists/";return console.log("loading template : "+a),a}}}})}]).run(["$state",function(a){a.go("search")}])}(),function(){"use strict";angular.module("main").controller("HomeController",["$scope","$window","gitService","$localStorage","$state","page",function(a,b,c,d,e,f){console.log("Home Controller");var g=function(a){a.data.access_token&&(d.access_token=a.data.access_token,d.scope=a.data.scope,d.token_type=a.data.token_type,h())},h=function(){c.getAuthenticatedUser().then(function(b){a.gitUserName=b.data.name,a.user=b.data})},i=function(){delete d.access_token,delete d.scope,delete d.token_type,delete a.user,delete a.gitUserName,e.go("search")},j=function(){b.open("https://github.com/login/oauth/authorize?client_id=492314afd654eaa0a8ed&scope=user%20repo"),b.removeEventListener("message",g),b.addEventListener("message",g,!1)};a.auth=j,a.logoutUser=i,d.access_token&&h(),a.page=f}])}(),function(){"use strict";angular.module("main").controller("SearchController",["$scope","gitService",function(a,b){console.log("Search Controller");var c=function(c){b.searchUser(a.searchValue,a.typeValue,c,a.pageSize).then(function(b){if(b.data.items.length>0){var c=b.data.items,d=b.data.total_count;a.searchResults=c,a.totalItems=d}else a.searchResults=null})};a.currentPage=1,a.maxSize=5,a.pageSize=10,a.searchValue="",a.typeValue="user",a.search=c,a.pageChanged=c}])}(),function(){"use strict";angular.module("main").controller("UserController",["$scope","userInfo",function(a,b){console.log("User Controller"),a.userInfo=b.data}])}();